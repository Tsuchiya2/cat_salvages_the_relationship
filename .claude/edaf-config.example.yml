# EDAF (Evaluator-Driven Agent Flow) Configuration
# This is an OPTIONAL configuration file
# The system auto-detects most settings, but you can override them here

# ==============================================================================
# GLOBAL SETTINGS
# ==============================================================================

# Language (auto-detected from package.json, requirements.txt, etc.)
# Options: typescript, javascript, python, java, go, rust, ruby, php, csharp, kotlin, swift
language: typescript

# Framework (auto-detected from dependencies)
# Backend: express, fastapi, spring-boot, gin, django, flask, nestjs
# Frontend: react, vue, angular, svelte, solid
framework: express

# ORM (auto-detected from dependencies)
# Options: sequelize, typeorm, prisma, django-orm, sqlalchemy, gorm, hibernate, diesel
orm: sequelize

# ==============================================================================
# CODE QUALITY EVALUATOR
# ==============================================================================

quality:
  # Linting tool (auto-detected)
  linter: eslint

  # Type checker (auto-detected)
  type_checker: typescript

  # Complexity tool (optional)
  complexity_tool: complexity-report

  # Thresholds
  thresholds:
    overall_score: 3.5      # Minimum score to pass (0-5 scale)
    type_coverage: 80       # Minimum type coverage percentage
    complexity_max: 10      # Maximum cyclomatic complexity

  # Custom rules (optional)
  custom_rules:
    - no-console: warn
    - max-lines: 300

# ==============================================================================
# CODE TESTING EVALUATOR
# ==============================================================================

testing:
  # Testing framework (auto-detected)
  framework: jest

  # Coverage tool (auto-detected)
  coverage_tool: jest

  # Coverage thresholds
  thresholds:
    overall_score: 3.5
    lines: 80
    branches: 75
    functions: 80
    statements: 80

  # Test pyramid ideal ratios
  pyramid:
    unit: 70        # 70% unit tests
    integration: 20 # 20% integration tests
    e2e: 10        # 10% end-to-end tests

  # Performance limits
  performance:
    max_suite_duration: 60000  # ms
    max_test_duration: 5000    # ms

# ==============================================================================
# CODE SECURITY EVALUATOR
# ==============================================================================

security:
  # SAST tool (auto-detected)
  sast: eslint-plugin-security

  # Dependency scanner (auto-detected)
  dependency_scanner: npm-audit

  # Secret scanner (optional)
  secret_scanner: trufflehog

  # Thresholds (security is strict!)
  thresholds:
    overall_score: 4.0  # Higher threshold for security
    critical: 0         # No critical vulnerabilities allowed
    high: 2            # Max 2 high vulnerabilities
    medium: 10         # Max 10 medium vulnerabilities

  # OWASP Top 10 check
  owasp_check: true

  # Exclusions
  exclude:
    - '**/test/**'
    - '**/tests/**'
    - '**/node_modules/**'

# ==============================================================================
# CODE DOCUMENTATION EVALUATOR
# ==============================================================================

documentation:
  # Documentation style (auto-detected)
  # Options: jsdoc, tsdoc, google, numpy, sphinx, javadoc, godoc, rustdoc, rdoc, yard, phpdoc
  style: jsdoc

  # Thresholds
  thresholds:
    overall_score: 3.5
    public_api_coverage: 90  # Public APIs should be well-documented
    overall_coverage: 70
    min_comment_length: 20   # Minimum characters per comment

  # Requirements
  require_examples: true
  require_param_docs: true
  require_return_docs: true

  # Exclusions
  exclude:
    - '**/test/**'
    - '**/tests/**'
    - '**/*.generated.*'

# ==============================================================================
# CODE MAINTAINABILITY EVALUATOR
# ==============================================================================

maintainability:
  # Complexity thresholds
  thresholds:
    overall_score: 3.5
    cyclomatic_complexity: 10
    cognitive_complexity: 15
    max_function_lines: 50
    max_class_lines: 300
    max_parameters: 5
    max_nesting_depth: 4
    duplication_percentage: 5

  # Tools (auto-detected)
  complexity_tool: complexity-report
  duplication_tool: jscpd

  # SOLID checks
  solid_checks:
    enabled: true
    single_responsibility: true
    open_closed: true
    liskov_substitution: false  # Hard to auto-detect
    interface_segregation: true
    dependency_inversion: true

# ==============================================================================
# CODE PERFORMANCE EVALUATOR
# ==============================================================================

performance:
  # Profiling tool (optional)
  profiler: clinic.js

  # Thresholds
  thresholds:
    overall_score: 3.5
    max_query_count: 10           # Max DB queries per request
    max_loop_nesting: 2           # Max nested loop depth
    max_api_calls_per_request: 5
    max_complexity: 'O(n log n)'  # Maximum algorithmic complexity

  # Anti-patterns to check
  anti_patterns:
    n_plus_one_queries: true
    synchronous_io: true
    memory_leaks: true
    nested_loops: true

  # Performance budgets
  budgets:
    max_response_time: 200  # ms
    max_memory_per_request: 50  # MB

# ==============================================================================
# CODE IMPLEMENTATION ALIGNMENT EVALUATOR
# ==============================================================================

implementation_alignment:
  # API contract files
  api_contract: openapi.yaml
  type_definitions: src/types/api.ts
  graphql_schema: schema.graphql

  # Requirements sources
  requirements_sources:
    - pr_description
    - linked_issues
    - acceptance_criteria
    - code_comments

  # Validation requirements
  require_error_handling: true
  require_input_validation: true
  require_edge_case_handling: true

  # Thresholds
  thresholds:
    overall_score: 4.0  # Implementation alignment is critical
    requirements_coverage: 90
    api_compliance: 100
    error_handling: 80
    edge_case_coverage: 70

# ==============================================================================
# GLOBAL EXCLUSIONS
# ==============================================================================

# Files/directories to exclude from all evaluations
global_exclude:
  - '**/node_modules/**'
  - '**/vendor/**'
  - '**/dist/**'
  - '**/build/**'
  - '**/coverage/**'
  - '**/.git/**'
  - '**/test/**'
  - '**/tests/**'
  - '**/__tests__/**'
  - '**/*.test.*'
  - '**/*.spec.*'
  - '**/*.min.js'
  - '**/*.bundle.js'
